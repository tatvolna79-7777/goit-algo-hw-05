'''
Завдання:
необхідно створити функцію generator_numbers, яка буде аналізувати текст, 
ідентифікувати всі дійсні числа, що вважаються частинами доходів, і повертати 
їх як генератор. Дійсні числа у тексті записані без помилок, чітко відокремлені 
пробілами з обох боків. Також потрібно реалізувати функцію sum_profit, яка буде 
використовувати generator_numbers для підсумовування цих чисел і обчислення 
загального прибутку.

Вимоги:
функція generator_numbers(text: str) повинна приймати рядок як аргумент і повертати
генератор, що ітерує по всіх дійсних числах у тексті. Дійсні числа у тексті вважаються 
записаними без помилок і чітко відокремлені пробілами з обох боків.
Функція sum_profit(text: str, func: Callable) має використовувати генератор 
generator_numbers для обчислення загальної суми чисел у вхідному рядку та приймати 
його як аргумент при виклику.

В коді:
використано регулярні вирази;
реалізовано генератор через yield;
є анотація типів і докстрінги у стандартному стилі;
враховано можливість відʼємних чисел;
sum_profit коректно працює з функцією-генератором;
додано перевірку callable, що робить функцію більш надійною;
код повністю відповідає стандарту PEP8.
'''
import re
from typing import Callable, Generator


def generator_numbers(input_text: str) -> Generator[float, None, None]:
    """
    Генеруємо всі дійсні числа з тексту, які мають пробіли з обох боків.
    Враховуються як додатні, так і від'ємні числа з десятковою частиною.

    Аргументи:
        input_text (str): Текст, у якому здійснюється пошук чисел.

    Породжує:
        float: Знайдене число, що відповідає вимогам ТЗ.
    """
    pattern = r"\s(-?\d+(?:\.\d+)?)\s"

    for match in re.finditer(pattern, input_text):
        yield float(match.group(1))


def sum_profit(
    input_text: str,
    func: Callable[[str], Generator[float, None, None]]
) -> float:
    """
    Обчислюємо суму всіх чисел у тексті, використовуючи передану функцію-генератор.

    Аргументи:
        input_text (str): Текст, що містить дійсні числа.
        func (Callable): Функція-генератор, яка витягує числа з тексту.

    Повертає:
        float: Загальна сума знайдених чисел.

    Винятки:
        TypeError: Якщо параметр func не є викликаною функцією (callable).
    """
    if not callable(func):
        raise TypeError("Аргумент func повинен бути функцією (callable).")

    return sum(func(input_text))


def main() -> None:
    """
    Демонструємо приклад використання функцій generator_numbers та sum_profit.
    """
    example_text = (
        "Загальний дохід працівника складається з декількох частин: "
        " 1000.01  як основний дохід, доповнений додатковими надходженнями "
        " 27.45  і 324.00 доларів."
    )

    total_income = sum_profit(example_text, generator_numbers)
    print(f"Загальний дохід: {total_income}")


if __name__ == "__main__":
    main()
