'''
Завдання:
необхідно створити функцію generator_numbers, яка буде аналізувати текст, 
ідентифікувати всі дійсні числа, що вважаються частинами доходів, і повертати 
їх як генератор. Дійсні числа у тексті записані без помилок, чітко відокремлені 
пробілами з обох боків. Також потрібно реалізувати функцію sum_profit, яка буде 
використовувати generator_numbers для підсумовування цих чисел і обчислення 
загального прибутку.

Вимоги:
функція generator_numbers(text: str) повинна приймати рядок як аргумент і повертати
генератор, що ітерує по всіх дійсних числах у тексті. Дійсні числа у тексті вважаються 
записаними без помилок і чітко відокремлені пробілами з обох боків.
Функція sum_profit(text: str, func: Callable) має використовувати генератор 
generator_numbers для обчислення загальної суми чисел у вхідному рядку та приймати 
його як аргумент при виклику.

В коді:
використано регулярні вирази;
реалізовано генератор через yield;
є анотація типів і докстрінги у стандартному стилі;
враховано можливість відʼємних чисел;
sum_profit коректно працює з функцією-генератором;
додано перевірку callable, що робить функцію більш надійною;
код повністю відповідає стандарту PEP8.
'''
import re
from typing import Callable, Generator


def generator_numbers(input_text: str) -> Generator[float, None, None]:
    """
    Генеруємо всі дійсні (у тому числі від'ємні) числа з переданого тексту.

    Числа вважаються записаними коректно та відокремлені пробілами.
    Пошук виконується за допомогою регулярного виразу.

    Args:
        text (str): Вхідний текст для аналізу.

    Yields:
        float: Знайдене дійсне число.
    """
    # Шукаємо цілі та дробові числа, у тому числі від'ємні.
    # Приклад: -42, 123, 45.67, -0.99
    pattern = r"-?\d+(?:\.\d+)?(?=\s|$|[.,])"

    for match in re.finditer(pattern, input_text):
        yield float(match.group())


def sum_profit(
    input_text: str,
    func: Callable[[str], Generator[float, None, None]]
) -> float:
    """
    Обчислюємо суму всіх чисел у тексті, використовуючи передану функцію-генератор.

    Args:
        text (str): вхідний текст, який містить дійсні числа.
        func (Callable): функція-генератор, що повертає числа з тексту.

    Returns:
        float: Загальна сума знайдених чисел.

    Raises:
        TypeError: Якщо func не є викликаною функцією (callable).
    """
    if not callable(func):
        raise TypeError("Аргумент func повинен бути функцією (callable).")

    return sum(func(input_text))

# Приклад використання
def main() -> None:
    """Точка входу програми."""
    example_text = (
        "Загальний дохід працівника складається з декількох частин: "
        "1000.01 як основний дохід, доповнений додатковими надходженнями "
        "27.45 і 324.00 доларів."
    )

    total_income = sum_profit(example_text, generator_numbers)
    print(f"Загальний дохід: {total_income}")


if __name__ == "__main__":
    main()
