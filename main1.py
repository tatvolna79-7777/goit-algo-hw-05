'''
Завдання: 
реалізувати функцію caching_fibonacci, яка створює та використовує кеш 
для зберігання і повторного використання вже обчислених значень чисел Фібоначчі.

Ряд Фібоначчі - це послідовність чисел виду: 0, 1, 1, 2, 3, 5, 8, ..., де кожне 
наступне число послідовності виходить додаванням двох попередніх членів ряду.

cache — словник, який знаходиться в середині замикання: зберігає всі обчислені значення.
fibonacci(n) — рекурсивна функція, яка:
- повертає базові значення при n = 0 або n = 1;
- перевіряє кеш перед обчисленням;
- зберігає результат у cache після обчислення.
Використання замикання дозволяє кешу зберігатися між викликами fibonacci.

Вимоги: код має відповідати псевдокоду, використовувати рекурсію, кешування, 
замикання та відповідати стандартам стилю Python (PEP8).
'''
def caching_fibonacci():
    """
    Створює функцію fibonacci(n), яка обчислює числа Фібоначчі
    з використанням рекурсії та кешування результатів.

    Returns:
        function: внутрішня функція fibonacci(n)
    """
    cache = {}  # Кеш для збереження вже обчислених значень

    def fibonacci(n):
        """
        Рекурсивно обчислює n число Фібоначчі.

        Args:
            n (int): індекс числа Фібоначчі (n >= 0)

        Returns:
            int: значення F(n)

        Raises:
            TypeError: якщо n не є цілим числом.
            ValueError: якщо n < 0.
        """
        if not isinstance(n, int):
            raise TypeError("Індекс числа Фібоначчі має бути цілим числом.")
        if n < 0:
            raise ValueError("Індекс числа Фібоначчі не може бути від’ємним.")

        if n == 0:
            return 0
        if n == 1:
            return 1

        if n in cache:
            return cache[n]

        # Рекурсивне обчислення з кешуванням
        cache[n] = fibonacci(n - 1) + fibonacci(n - 2)
        return cache[n]

    return fibonacci

# Отримуємо функцію fibonacci
fib = caching_fibonacci()

# Використовуємо функцію fibonacci для обчислення чисел Фібоначчі
print(fib(10))  # Виведе 55
print(fib(15))  # Виведе 610
